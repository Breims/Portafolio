---
import { Image } from '@astrojs/image/components';
import { Icon } from 'astro-icon';
import CardProject from './CardProject.astro';
import { getCollection } from 'astro:content';
import astroIcon from '../../../public/assets/logos/astro.svg';

const projects = await getCollection('projects');
---

<section
	data-testid="projects"
	id="projects"
	class="mt-16 grid place-content-center place-items-center lg:mt-0 lg:h-screen"
>
	<header class="flex w-full flex-col items-center justify-center lg:mb-10">
		<h2 class="font-CODE text-2xl text-darkness dark:text-faint lg:text-4xl">Projects</h2>
		<span class="mb-2 h-1 w-10 bg-darkness dark:bg-faint lg:mb-6"></span>
		<div class="flex">
			<Icon class="mx-2 h-8 lg:h-10" name="logos:html-5" />
			<Icon class="mx-2 h-8 lg:h-10" name="logos:css-3" />
			<Icon class="mx-2 h-8 lg:h-10" name="logos:javascript" />
			<Icon class="mx-2 h-8 lg:h-10" name="logos:typescript-icon" />
			<Icon class="mx-2 h-8 lg:h-10" name="logos:react" />
			<Icon class="mx-2 h-8 lg:h-10" name="logos:nextjs-icon" />
			<Image
				class:list={`h-8 lg:h-10`}
				src={astroIcon}
				alt="Astro"
				format="svg"
				width={50}
				height={50}
				loading="eager"
			/>
			<Icon class="mx-2 h-8 lg:h-10" name="logos:svelte-icon" />
			<Icon class="mx-2 h-8 lg:h-10" name="logos:tailwindcss-icon" />
		</div>
	</header>

	<div class="scrolling-touch mb-5 grid w-full grid-flow-col gap-4 overflow-x-auto p-4 lg:mb-10">
		{
			projects.map((project) => (
				<CardProject
					img={project.data.img}
					url={project.data.url}
					title={project.data.title}
					description={project.data.description}
					urlrepo={project.data.urlrepo}
					urllive={project.data.urllive}
					ruteTech={project.data.ruteTech}
				/>
			))
		}
	</div>
	<a
		href="https://github.com/Breims?tab=repositories"
		target="_blank"
		rel="noopener"
		class="flex items-center justify-center text-center font-Raleway text-xs text-darkness hover:text-faint dark:text-light dark:hover:text-faint md:text-base"
		aria-label="link to repository"
	>
		View full private projects archive
		<svg
			xmlns="http://www.w3.org/2000/svg"
			fill="none"
			viewBox="0 0 24 24"
			stroke-width="1.5"
			stroke="currentColor"
			class="ml-1 h-6 w-6"
		>
			<path
				stroke-linecap="round"
				stroke-linejoin="round"
				d="M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3"></path>
		</svg>
	</a>
</section>
